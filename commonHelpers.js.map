{"version":3,"file":"commonHelpers.js","sources":["../src/js/image-api.js","../src/js/image-list.js","../src/js/messages.js","../src/js/main.js"],"sourcesContent":["import axios from 'axios';\n\naxios.defaults.baseURL = 'https://pixabay.com/api/';\naxios.defaults.params = {\n  image_type: 'photo',\n  orientation: 'horizontal',\n  per_page: 40,\n  key: '20826556-19d7dce6dc96816ed1b7dccf7',\n};\n\nexport const fetchImages = async (query, page) => {\n  const { data } = await axios.get('', {\n    params: {\n      q: query,\n      page,\n    },\n  });\n  return data;\n};\n","export default function renderTemplate(data) {\n  return data\n    .map(\n      item => `\n<li class=\"photo-card\">\n  <a href=\"${item.largeImageURL}\" class=\"photo-card-link\">\n    <img class=\"photo-card-image\" src=\"${item.webformatURL}\" alt=\"${item.tags}\" loading=\"lazy\" />\n  </a>\n  <div class=\"info\">\n    <p class=\"info-item\">\n      <i class=\"material-icons\">thumb_up</i>\n      ${item.likes}\n    </p>\n    <p class=\"info-item\">\n      <i class=\"material-icons\">visibility</i>\n      ${item.views}\n    </p>\n    <p class=\"info-item\">\n      <i class=\"material-icons\">comment</i>\n      ${item.comments}\n    </p>\n    <p class=\"info-item\">\n      <i class=\"material-icons\">cloud_download</i>\n      ${item.downloads}\n    </p>\n  </div>\n</li>\n`\n    )\n    .join('');\n}\n","import iziToast from 'izitoast';\n/**\n * baseIziToastConfig\n */\nconst baseIziToastConfig = {\n  timeout: 3000,\n  close: false,\n  closeOnClick: true,\n  icon: null,\n  position: 'topRight',\n};\n/**\n * Messages\n */\nexport class Messages {\n  static success(message) {\n    iziToast.success({\n      title: 'OK',\n      titleColor: 'green',\n      message: message,\n      messageColor: 'green',\n\n      progressBarColor: 'green',\n      ...baseIziToastConfig,\n    });\n  }\n  static error(message) {\n    iziToast.error({\n      title: 'Error',\n      titleColor: 'red',\n      message: message,\n      messageColor: 'red',\n      progressBarColor: 'red',\n      ...baseIziToastConfig,\n    });\n  }\n  static warning(message) {\n    iziToast.warning({\n      title: 'Caution',\n      message: message,\n      titleColor: 'red',\n      messageColor: 'red',\n      progressBarColor: 'red',\n      ...baseIziToastConfig,\n    });\n  }\n}\n","import SimpleLightbox from 'simplelightbox';\nimport { fetchImages } from './image-api.js';\nimport renderTemplate from './image-list.js';\nimport { Messages } from './messages.js';\n\nimport 'izitoast/dist/css/iziToast.min.css';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst formRef = document.querySelector('#search-form');\nconst galleryRef = document.querySelector('.gallery');\n\nlet page = 1;\nlet query = '';\nlet totalHits = 0;\nlet totalPages = 1;\n\nconst options = {\n  rootMargin: '200px',\n  threshold: 0.1,\n};\n\nconst lightBox = new SimpleLightbox('.gallery a', {});\nfunction onEntry(entries, observer) {\n  entries.forEach(async entry => {\n    if (entry.isIntersecting) {\n      observer.unobserve(entry.target);\n      await makeRender();\n    }\n  });\n}\n\nconst observer = new IntersectionObserver(onEntry, options);\n\nasync function querySubmitHandler(e) {\n  e.preventDefault();\n  await makeRender();\n}\nfunction queryChecker() {\n  if (formRef.elements.searchQuery.value !== query) {\n    page = 1;\n    totalPages = 1;\n    query = formRef.elements.searchQuery.value;\n    return true;\n  } else {\n    page += 1;\n    return false;\n  }\n}\n\nasync function makeRender() {\n  const isFirstQuery = queryChecker();\n  if (isFirstQuery) {\n    galleryRef.innerHTML = '';\n  }\n  if (page > totalPages) {\n    Messages.warning('No more images');\n    return;\n  }\n  const hits = await fetchImages(query, page)\n    .then(data => {\n      totalHits = data.totalHits;\n      totalPages = Math.ceil(totalHits / 40);\n      return data.hits;\n    })\n    .catch(error => Messages.error(error.message));\n  if (!hits.length) {\n    Messages.error(\n      'Sorry, there are no images matching your search query. Please try again.'\n    );\n    return;\n  }\n  if (isFirstQuery) {\n    const massage = `\"Hooray! We found ${totalHits} images.\"`;\n    Messages.success(massage);\n  }\n  galleryRef.insertAdjacentHTML('beforeend', renderTemplate(hits));\n  observer.observe(galleryRef.lastElementChild);\n  lightBox.refresh();\n}\n\nformRef.addEventListener('submit', querySubmitHandler);\n"],"names":["axios","fetchImages","query","page","data","renderTemplate","item","baseIziToastConfig","Messages","message","iziToast","formRef","galleryRef","totalHits","totalPages","options","lightBox","SimpleLightbox","onEntry","entries","observer","entry","makeRender","querySubmitHandler","e","queryChecker","isFirstQuery","hits","error","massage"],"mappings":"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"}